(this["webpackJsonpbank-search"]=this["webpackJsonpbank-search"]||[]).push([[0],{23:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"handleCity",(function(){return J})),a.d(n,"handleSearch",(function(){return M})),a.d(n,"toggleFavourite",(function(){return $})),a.d(n,"updateFavourites",(function(){return _})),a.d(n,"toggleShowFavourite",(function(){return q})),a.d(n,"fetchBanks",(function(){return G}));var r=a(0),o=a.n(r),c=a(12),s=a.n(c),i=a(14),l=a(7),u=a(22),p=a(13),h={selectedCity:"",searchTerm:"",loader:!1,error:{hasError:!1,message:""},banks:[],displayingBanks:[],availableCities:["Bangalore","Mumbai","Coimbatore","Pune","Delhi"],favourites:{},showFavourites:!1,cache:{}};function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=function(e){var t=function(e,t){var a=t.toLowerCase();return a.length<=0||e.length<=0?e:e.filter((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){if(e[n[t]].toString().toLowerCase().includes(a))return!0}return!1}))}(e.banks,e.searchTerm);return t=function(e,t,a){return a?t.filter((function(t){return e.favourites[t.ifsc]})):t}(e,t,e.showFavourites)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},h,e);switch(a.error=Object.assign({},h.error,a.error),t.type){case"loader":a.loader=!0;break;case"unloader":a.loader=!1;break;case"handle-city":a.selectedCity=t.value;break;case"fetch-banks-success":a.banks=t.value,a.cache[a.selectedCity.toUpperCase()]=t.value,a.displayingBanks=m(a);break;case"fetch-banks-failed":a.error.hasError=!0,a.error.message=t.value;break;case"handle-search":a.searchTerm=t.value,a.displayingBanks=m(a);break;case"update-favourites":var n=window.localStorage.getItem("favourites");if(n){var r=!0,o=!1,c=void 0;try{for(var s,i=n.split(",")[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;a.favourites[l.toString()]=!0}}catch(u){o=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}}a=f({},a);break;case"toggle-favourite":a.favourites[t.value]=!a.favourites[t.value],a.favourites[t.value]||(delete a.favourites[t.value],a.displayingBanks=m(a)),window.localStorage.setItem("favourites",Object.keys(a.favourites)),a=f({},a);break;case"toggle-show-favourite":a.showFavourites=!a.showFavourites,a.displayingBanks=m(a);break;default:return a}return a},v=Object(l.c)({bankSearch:b}),g=function(e){return Object(l.d)(v,e,Object(l.a)(u.a))},y=a(2),k=a(3),O=a(5),E=a(4),j=a(6),w=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedCity,a=e.options,n=e.onCitySelect;return o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("button",{className:"nav-link btn btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},""===t?"Choose city":t),o.a.createElement("div",{className:"dropdown-menu","x-placement":"bottom-start",style:{position:"absolute",transform:"translate3d(0px, 38px, 0px)",top:0,left:0,willChange:"transform"}},a.map((function(e){return o.a.createElement("button",{className:"dropdown-item",onClick:function(t){return n(e)},key:e},e)}))))}}]),t}(r.Component),S=a(9),N=a(10),C=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-5 text-center justify-content-center"},o.a.createElement(S.a,{icon:N.e,size:"10x"})),o.a.createElement("div",{className:"col-7"},o.a.createElement("div",{className:"p-3"},o.a.createElement("p",null,"Oops, Seems like there's nothing to be displayed here"),o.a.createElement("p",null,"Try doing the following actions"),o.a.createElement("ul",null,o.a.createElement("li",null,"Select a city if you have not selected one"),o.a.createElement("li",null,"If the city is selected, Please try with someother city"),o.a.createElement("li",null,"Try changing the filters"))))))}}]),t}(o.a.Component),P=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).abs=function(e){return e>0?e:-1*e},a.getStartPage=function(e,t){var n=(e-1)%t;return 0===n?e:a.abs(n-(t-n))},a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"range",value:function(e,t){return Array.apply(0,Array(t)).map((function(t,a){return a+e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.totalSize,n=t.size,r=this.props.currentPage,c=this.props.handleSize,s=a/n|(a>0?1:0),i=(r=r<s?r:s)+5<s?5:s-r+1,l=this.range(r,i);return s<=5?null:o.a.createElement("div",{className:"d-flex flex-row flex-wrap justify-content-between"},o.a.createElement("div",{className:"d-inline-block mb-lg-2"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","data-display":"static","aria-haspopup":"true","aria-expanded":"false"},n),o.a.createElement("span",{className:"p-2"},"of ",a," results"),o.a.createElement("div",{className:"dropdown-menu"},this.props.showOptions.map((function(e){return o.a.createElement("button",{onClick:function(t){return c(e)},key:e,className:"dropdown-item"},e)}))))),o.a.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},o.a.createElement("div",{className:"btn-group",role:"group","aria-label":"First group"},o.a.createElement("button",{type:"button",onClick:function(t){return e.props.onPrevPage()},className:"btn btn-success",disabled:r-5<=0},o.a.createElement(S.a,{icon:N.a})),l.map((function(t){return o.a.createElement("button",{key:t,onClick:function(a){return e.props.onPage(t)},className:"btn btn-secondary ".concat(r===t?"active":"")},t)})),o.a.createElement("button",{type:"button",onClick:function(t){return e.props.onNextPage()},className:"btn btn-success",disabled:r+5>=s},o.a.createElement(S.a,{icon:N.b})))))}}]),t}(o.a.Component);P.defaultProps={showOptions:[5,10,50]};var x=P;function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(O.a)(this,Object(E.a)(t).call(this,e))).updateIndex=function(){var e=a.state,t=e.page,n=e.size,r=n*(t-1),o=r+n;a.setState({startIndex:r,endIndex:o})},a.onNextPage=function(){a.setState(B({},a.state,{page:a.state.page+5}),a.updateIndex)},a.onPrevPage=function(){a.setState(B({},a.state,{page:a.state.page-5}),a.updateIndex)},a.onPage=function(e){a.setState({page:e},a.updateIndex)},a.handleSizeChange=function(e){a.setState({size:e,page:1},a.updateIndex)},a.renderFavIcon=function(e){return void 0!==a.props.favourites[e.ifsc]&&a.props.favourites[e.ifsc]?o.a.createElement("td",{onClick:function(t){return a.props.toggleFavourite(e.ifsc)},className:""},o.a.createElement(S.a,{icon:N.c,className:"cursor-pointer text-danger"})):o.a.createElement("td",{onClick:function(t){return a.props.toggleFavourite(e.ifsc)},className:""},o.a.createElement(S.a,{className:"cursor-pointer",icon:N.d}))},a.renderBanks=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:"table table-dark table-responsive-lg"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"IFSC"),o.a.createElement("th",null,"Bank name"),o.a.createElement("th",null,"Branch"),o.a.createElement("th",{colSpan:"3"},o.a.createElement("input",{onChange:a.props.handleShowFavourites,type:"checkbox",className:"form-check-input",checked:a.props.showFavourites})," Favourites"))),o.a.createElement("tbody",null,e.length>0?e.slice(a.state.startIndex,a.state.endIndex).map((function(e){return o.a.createElement("tr",{key:"bank-".concat(e.ifsc,"-").concat(e.id)},o.a.createElement("td",null,e.ifsc),o.a.createElement("td",null,e.bank_name),o.a.createElement("td",null,e.branch),a.renderFavIcon(e))})):o.a.createElement("tr",null,o.a.createElement("td",{className:"bg-warning text-center",colSpan:"6"},"no results")))),o.a.createElement(x,{totalSize:e.length,size:a.state.size,handleSize:a.handleSizeChange,currentPage:a.state.page,onNextPage:a.onNextPage,onPrevPage:a.onPrevPage,onPage:a.onPage}))},a.renderNoBanks=function(){return o.a.createElement(C,null)},a.state={size:10,page:1,startIndex:0,endIndex:10},a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.showFavourites!==this.props.showFavourites&&this.setState({page:1,size:10},this.updateIndex)}},{key:"render",value:function(){var e=this.props.banks;return null!=e&&e.length>0||this.props.showFavourites?this.renderBanks(e):this.renderNoBanks()}}]),t}(r.Component),z=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("input",{value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},placeholder:"Search",className:"form-control"}))}}]),t}(o.a.Component),D=function(e){function t(){return Object(y.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"text-center"},o.a.createElement("div",{className:"spinner-border text-light",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),t}(r.Component),T=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(O.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).handleCity=function(e){a.props.actions.handleCity(e),a.props.actions.fetchBanks(a.props.bankSearch.cache,e.toUpperCase())},a.handleSearch=function(e){a.props.actions.handleSearch(e)},a.handleShowFavourites=function(e){a.props.actions.toggleShowFavourite()},a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.fetchBanks(this.props.bankSearch.cache,""),this.props.actions.updateFavourites()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content-body"},o.a.createElement(w,{selectedCity:this.props.bankSearch.selectedCity,onCitySelect:this.handleCity,options:this.props.bankSearch.availableCities}),o.a.createElement("div",{className:"mt-3"},o.a.createElement(z,{value:this.props.bankSearch.searchTerm,onChange:this.handleSearch})),o.a.createElement("div",{className:"mt-3"},this.props.bankSearch.loader?o.a.createElement(D,null):o.a.createElement(I,{banks:this.props.bankSearch.displayingBanks,showFavourites:this.props.bankSearch.showFavourites,favourites:this.props.bankSearch.favourites,toggleFavourite:this.props.actions.toggleFavourite,handleShowFavourites:this.handleShowFavourites}))))}}]),t}(r.Component),A=a(18),L=a.n(A),U=function e(){Object(y.a)(this,e)};U.fetchBanks=function(e,t,a){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;L.a.ajax(e).done((function(e){return null!=t?t(e):console.log("fetch success")})).fail((function(e){return null!=a?a(e):console.error("fetch failed")}))}({url:function(e){return e.startsWith("/")||(e="/".concat(e)),"https://vast-shore-74260.herokuapp.com"+e}("banks"),data:function(e){return L.a.param(e)}(e)},t,a)};var W=function(e){return{type:"fetch-banks-success",value:e}},J=function(e){return{type:"handle-city",value:e}},M=function(e){return{type:"handle-search",value:e}},$=function(e){return{type:"toggle-favourite",value:e}},_=function(){return{type:"update-favourites"}},q=function(){return{type:"toggle-show-favourite"}},G=function(e,t){return null==t||t.length<=0?function(e){return e({type:"unloader"})}:function(a){return a({type:"loader"}),e[t]?(a({type:"unloader"}),a(W(e[t]))):U.fetchBanks({city:t},(function(e){a({type:"unloader"}),a(W(e))}),(function(e){a({type:"unloader"}),a({type:"fetch-banks-failed",value:e})}))}},H=Object(i.b)((function(e){return{bankSearch:e.bankSearch}}),(function(e){return{actions:Object(l.b)(n,e)}}))(T),K=function(e){return o.a.createElement(i.a,{store:g(e)},o.a.createElement(H,e))};var Q=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container w-60 h-100"},o.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Q,null),document.getElementById("bank-search-app-dom")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.3bfed931.chunk.js.map